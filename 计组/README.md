* “王道”指王道2020计组复习指导
* “课本”指《计算机组成与设计 软件/硬件接口》
* “唐的课本”指《计算机组成原理》第二版，唐朔飞

## 计算机系统概述

### 发展历程

### 层次结构

冯诺依曼结构，以运算器为中心，存储程序。

现代结构，以存储器为中心。

**MAR和MDR**：MAR存储地址，长度和存储单元个数有关（等于PC），属于存储器，但存在于CPU中；MDR存储数据，长度等于存储字长。不论是访存取指令还是数据，都是先将地址传给MAR，访存取出内容放入MDR，结合指令执行过程的数据通路理解。

王道P8选择题1，结构图。控制器和运算器组成CPU，再加上存储器就组成了主机。

### 性能指标

**机器的32位/64位：机器字长，指计算机进行一次整数运算能处理的二进制数据的位数。一般等于内部寄存器的大小**。王道P22，与指令字长和存储字长的区别。

CPI, MIPS。

王道P22，透明性。

## 数据的表示和运算

### 数制与编码

C中二进制`0b`，八进制`0`，十六进制`0x`。

#### 不同进制相互转换

二进制转八进制/十六进制：将每3位（十六进制为4位）二进制数转换成一个八进制数。

十进制转换为其它进制数：整数部分用**除基取余法**，小数部分用**乘基取整法**。

BCD码：Binary-Coded Decimal，二进制编码的十进制数。常用8421码，拿8421码运算时得到大于`1011`时需要加6修正。

大端模式，小端模式：详见CMU课件note1。

#### 校验码

校验码是能发现或自动纠正错误的数据编码，也叫检错纠错码。原理是通过在原数据码上增加冗余码来达到检错/纠错。

码距：任意两个合法码字之间最少变化的二进制位数（位数，不是差值）。码距>=2时，校验码开始具有检错能力（显而易见）。码距越大，检错、纠错能力越强，且检错能力总是大于纠错能力。

**奇偶校验码**：1位校验位，码距为2，可以检测出奇数位错误（奇数个错误），无法确定错误位置，无法纠正错误。奇数校验，偶校验。

**海明码**：默认的，基本的海明码可以检测并纠正1位错误，不论是数据位还是校验位。使用步骤：确定位数（使用`n + k <= 2^k - 1`就限制了这个海明码是只能检测1位的基本海明码） - 确定校验位的位置 - 分组 - 校验位取值 - 校验。

**CRC码**：可以检测并纠正1位错误。使用步骤：生成多项式G的最高次幂为校验位R的位数 - 原信息码左移R位 - **模2除**得到R位余数作为校验位 - 校验。

### 定点数

原码，反码，补码，移码：参考王道，课本P223。

补码大小比较：规则是，符号位相同，数值越大，码值越大。王道P49的21-24题。

#### 定点数移位运算

算术移位：符号位不动，补0或补1，规则是王道P39的表2.1。

逻辑移位：全部移动，全部补0。

循环移位：分为带进位标志位和不带进位标志位。

#### 定点数加减法运算

减法运算将减数取反，化为加法运算。

补码运算溢出判断：看双符号位/进位。

#### 定点数乘除运算

课本P222。

原码一位乘法：符号位单独计算，相当于普通乘法，看被乘数最低位，若为1则结果加乘数并右移。

补码一位乘法（Booth算法）：符号位参与运算，将二进制数拆开化简以减少加法运算次数。

原码除法（不恢复余数法）：符号位单独运算。

补码除法（加减交替法）：符号位参与运算。

**强制类型转换**：见CMU课件note1。C中隐式类型转换的规则是向上提升，即运算时将所有操作数隐式转换为其中最高的类型。

### 浮点数

CMU课件note2。

规格化：看尾数，原码和补码的规则不同，王道P64。尾数溢出时右归，其它格式不合规则都左归。

溢出：看规格化后的阶码是否溢出。

### ALU

一位全加器：和表达式，进位表达式。

并行加法器：G和P的公式。

## 存储系统

## 指令系统

## 中央处理器

## 总线

## 输入/输出系统